VuFind.Menu=function(){$(function(){VuFind.Menu.AllSideBarSelectors=VuFind.Menu.SearchBoxSelectors+","+VuFind.Menu.SideBarSearchSelectors+","+VuFind.Menu.SideBarAccountSelectors+","+VuFind.Menu.SideBarMenuSelectors+","+VuFind.Menu.ExploreMoreSelectors;VuFind.Menu.stickyMenu("#horizontal-menu-bar-container","sticky-menu-bar");VuFind.Menu.stickyMenu("#vertical-menu-bar","sticky-sidebar");var mobileMode=false;if($("#horizontal-menu-bar-container").is(":visible")){VuFind.Menu.hideAllFast();mobileMode=true}$(window).resize(function(){if(mobileMode){if(!$("#horizontal-menu-bar-container").is(":visible")){mobileMode=false;if($("#vertical-menu-bar").length){$("#horizontal-search-box").show();$(".menu-bar-option").removeClass("menu-icon-selected");VuFind.Menu.hideAllFast();if($("#mobile-menu-search-icon","#horizontal-menu-bar-container").is(".menu-icon-selected")){VuFind.Menu.Mobile.resetRefineSearch();VuFind.Menu.SideBar.showSearch(".menu-bar-option:nth-child(1)>a")}else if($("#mobile-menu-account-icon","#horizontal-menu-bar-container").is(".menu-icon-selected")){VuFind.Menu.SideBar.showAccount(".menu-bar-option:nth-child(2)>a")}else if($("#mobile-menu-menu-icon","#horizontal-menu-bar-container").is(".menu-icon-selected")){VuFind.Menu.SideBar.showMenu(".menu-bar-option:nth-child(3)>a")}else if($("#mobile-menu-explore-more-icon","#horizontal-menu-bar-container").is(".menu-icon-selected")){VuFind.Menu.SideBar.showExploreMore(".menu-bar-option:nth-child(4)>a")}else{if($(VuFind.Menu.AllSideBarSelectors).filter(":visible").length==0){VuFind.Menu.collapseSideBar()}}}else{$(VuFind.Menu.AllSideBarSelectors).show()}}}else{if($("#horizontal-menu-bar-container").is(":visible")){mobileMode=true;$(".menu-icon-selected","#horizontal-menu-bar-container").removeClass("menu-icon-selected");VuFind.Menu.hideAllFast();if($(".menu-bar-option:nth-child(1)","#vertical-menu-bar").is(".menu-icon-selected")){VuFind.Menu.Mobile.showSearch("#mobile-menu-search-icon")}else if($(".menu-bar-option:nth-child(2)","#vertical-menu-bar").is(".menu-icon-selected")){VuFind.Menu.Mobile.showAccount("#mobile-menu-account-icon")}else if($(".menu-bar-option:nth-child(3)","#vertical-menu-bar").is(".menu-icon-selected")){VuFind.Menu.Mobile.showMenu("#mobile-menu-menu-icon")}else if($(".menu-bar-option:nth-child(4)","#vertical-menu-bar").is(".menu-icon-selected")){VuFind.Menu.Mobile.showExploreMore("#mobile-menu-explore-more-icon")}}}})});var reloadRelatedTitles=function(){if($(VuFind.Menu.ExploreMoreSelectors).is(":visible")){$(".jcarousel").jcarousel("reload")}};return{SearchBoxSelectors:"#home-page-search",SideBarSearchSelectors:"#narrow-search-label,#facet-accordion,#results-sort-label,#results-sort-label+div.row,#remove-search-label,#remove-search-label+.applied-filters,#similar-authors",SideBarAccountSelectors:"#home-page-login,#home-account-links",SideBarMenuSelectors:"#home-page-login,#home-page-library-section",ExploreMoreSelectors:"#explore-more-header,#explore-more-body",AllSideBarSelectors:"",stickyMenu:function(menuContainerSelector,stickyMenuClass){var menu=$(menuContainerSelector),viewportHeight=$(window).height(),switchPosition,switchPositionAdjustment=$("#masquerade-header").height();$(window).resize(function(){viewportHeight=$(this).height()}).scroll(function(){if(menu.is(":visible")&&viewportHeight<$("#main-content-with-sidebar").height()){if(typeof switchPosition=="undefined"){switchPosition=menu.offset().top-switchPositionAdjustment}var fixedOffset=menu.offset().top,notFixedScrolledPosition=$(this).scrollTop();if(menu.is("."+stickyMenuClass)&&fixedOffset<=switchPosition){menu.removeClass(stickyMenuClass)}if(!menu.is("."+stickyMenuClass)&&notFixedScrolledPosition>=switchPosition){menu.addClass(stickyMenuClass);if(switchPositionAdjustment){menu.css("top",switchPositionAdjustment)}}}}).scroll()},hideAllFast:function(){return $(VuFind.Menu.AllSideBarSelectors).filter(":visible").hide()},collapseSideBar:function(){$("#side-bar,#vertical-menu-bar-container").addClass("collapsedSidebar");$("#main-content-with-sidebar").addClass("mainContentWhenSiderbarCollapsed");$("#main-content-with-sidebar .jcarousel").jcarousel("reload")},openSideBar:function(){$("#main-content-with-sidebar").removeClass("mainContentWhenSiderbarCollapsed");$("#side-bar,#vertical-menu-bar-container").removeClass("collapsedSidebar");$("#main-content-with-sidebar .jcarousel").jcarousel("reload")},reloadRelatedTitles:function(){if($(VuFind.Menu.ExploreMoreSelectors).is(":visible")){$(".jcarousel").jcarousel("reload")}},SideBar:{hideAll:function(){return $(VuFind.Menu.AllSideBarSelectors).filter(":visible").animate({width:"toggle"},350)},showMenuSection:function(sectionSelector,clickedElement,afterAnimationAction){$.when(this.hideAll()).done(function(){var elem=$(clickedElement),parent=elem.parent(".menu-bar-option");if(parent.length>0){if(parent.is(".menu-icon-selected")){parent.removeClass("menu-icon-selected")}else{$(".menu-bar-option").removeClass("menu-icon-selected");parent.addClass("menu-icon-selected");VuFind.Menu.openSideBar();$.when($(sectionSelector).animate({width:"toggle"},350)).done(afterAnimationAction)}}}).done(function(){if($(VuFind.Menu.AllSideBarSelectors).filter(":visible").length==0){VuFind.Menu.collapseSideBar()}})},showSearch:function(clickedElement){if($("#horizontal-search-box").is(":visible")){this.showMenuSection(VuFind.Menu.SideBarSearchSelectors,clickedElement)}else{this.showMenuSection("#home-page-search,"+VuFind.Menu.SideBarSearchSelectors,clickedElement)}},showMenu:function(clickedElement){this.showMenuSection(VuFind.Menu.SideBarMenuSelectors,clickedElement)},showAccount:function(clickedElement){this.showMenuSection(VuFind.Menu.SideBarAccountSelectors,clickedElement)},showExploreMore:function(clickedElement){this.showMenuSection(VuFind.Menu.ExploreMoreSelectors,clickedElement,reloadRelatedTitles)}},Mobile:{hideAll:function(){return $(VuFind.Menu.AllSideBarSelectors).filter(":visible").slideUp()},showMenuSection:function(sectionSelector,clickedElement){return $.when(this.hideAll()).done(function(){var elem=$(clickedElement);VuFind.Menu.openSideBar();if(elem.is(".menu-icon-selected")){elem.removeClass("menu-icon-selected");$("#mobileHeader").show();$(sectionSelector).slideUp()}else{$(".menu-icon-selected","#horizontal-menu-bar-container").removeClass("menu-icon-selected");elem.addClass("menu-icon-selected");$("#mobileHeader").hide();$(sectionSelector).slideDown()}})},showSearch:function(clickedElement){this.showMenuSection("#home-page-search",clickedElement);this.resetRefineSearch()},showMenu:function(clickedElement){this.showMenuSection(VuFind.Menu.SideBarMenuSelectors,clickedElement)},showAccount:function(clickedElement){this.showMenuSection(VuFind.Menu.SideBarAccountSelectors,clickedElement);$("#myAccountPanel").filter(":not(.in)").collapse("show")},showExploreMore:function(clickedElement){this.showMenuSection(VuFind.Menu.ExploreMoreSelectors,clickedElement).done(reloadRelatedTitles)},showSearchFacets:function(){if(!$("#mobile-menu-search-icon").is(".menu-icon-selected")){if($("#horizontal-search-box").is(":visible")){this.showSearch("#mobile-menu-search-icon")}else{$("#mobile-menu-search-icon").addClass("menu-icon-selected")}}var btn=$("#refineSearchButton"),text=btn.text();if(text=="Refine Search"){$(VuFind.Menu.SideBarSearchSelectors).slideDown();btn.text("Hide Refine Search")}if(text=="Hide Refine Search"){$(VuFind.Menu.SideBarSearchSelectors).slideUp();btn.text("Refine Search")}},resetRefineSearch:function(){$(VuFind.Menu.SideBarSearchSelectors).hide();$("#refineSearchButton").text("Refine Search")}}}}(VuFind.Menu||{});